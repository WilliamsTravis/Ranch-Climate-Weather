
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
                                      College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user Stata license expires 19 Mar 2019:
       Serial number:  301509290780
         Licensed to:  Travis Williams
                       Earth Lab

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.

. do STATA/models/py_template_linux.do data/tables/rmw/py_temp.csv logweight L1
> 2.logweight price winter1 spring1 summer1 fall1 winter2 spring2 summer2 fall2
>  i.year 

. //clear everything out
. clear all

. 
. //Includes function, up to comma
. local which `1'

. // Two files, one temp for aggregatation & one to stay the same
. 
. //Increase matrix size
. set matsize 600

. 
. // import data
. import delimited `which'
(79 vars, 5,604 obs)

. //import delimited "data/tables/rmw/noaa_500_standardized_central_all.csv"
. 
. // create formula 
. local y `2'

. display y
103340.52

. local x1 `3'

. local x2 `4'

. local x3 `5'

. local x4 `6'

. local x5 `7'

. local x6 `8'

. local x7 `9'

. local x8 `10'

. local x9 `11'

. local x10 `12'

. local x11 `13'

. local x12 `14'

. local x13 `15'

. local x14 `16'

. local x15 `17'

. 
. // Set date and time 
. egen id = group(polyid)

. g time = ym(year,month)

. xtset id time
       panel variable:  id (unbalanced)
        time variable:  time, 504 to 702, but with gaps
                delta:  1 unit

. 
. /////////////////////////////////////////////////////////////////////////////
> ///
> //////////////////////////////// Model #1 ///////////////////////////////////
> ///        
> /////////////////////////////////////////////////////////////////////////////
> ///
> eststo: xtreg `y' `x1' `x2' `x3' `x4' `x5' `x6' `x7' `x8' `x9' `x10' `x11' `x
> 12' `x13' `x14' `x15', fe vce(robust) 

Fixed-effects (within) regression               Number of obs     =      4,960
Group variable: id                              Number of groups  =         40

R-sq:                                           Obs per group:
     within  = 0.5982                                         min =          9
     between = 0.9880                                         avg =      124.0
     overall = 0.6933                                         max =        186

                                                F(25,39)          =     191.49
corr(u_i, Xb)  = 0.4768                         Prob > F          =     0.0000

                                    (Std. Err. adjusted for 40 clusters in id)
------------------------------------------------------------------------------
             |               Robust
   logweight |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
   logweight |
        L12. |    .766352   .0225036    34.05   0.000     .7208342    .8118698
             |
       price |  -.0004081   .0000823    -4.96   0.000    -.0005746   -.0002416
     winter1 |   .0152663   .0099884     1.53   0.134     -.004937    .0354697
     spring1 |  -.0035758   .0083932    -0.43   0.672    -.0205526     .013401
     summer1 |   .0091269   .0132138     0.69   0.494    -.0176005    .0358544
       fall1 |  -.0011469   .0105764    -0.11   0.914    -.0225396    .0202459
     winter2 |  -.0025561   .0067006    -0.38   0.705    -.0161094    .0109973
     spring2 |   .0040973   .0087027     0.47   0.640    -.0135057    .0217002
     summer2 |   .0159678   .0115834     1.38   0.176    -.0074618    .0393973
       fall2 |   .0230499      .0105     2.20   0.034     .0018117    .0442881
             |
        year |
       2004  |    .008135   .0076343     1.07   0.293    -.0073068    .0235769
       2005  |   .0197338   .0082182     2.40   0.021     .0031109    .0363566
       2006  |  -.0195402   .0107232    -1.82   0.076    -.0412298    .0021494
       2007  |   .0089586    .008286     1.08   0.286    -.0078015    .0257187
       2008  |  -.0027234   .0073923    -0.37   0.715    -.0176758     .012229
       2009  |  -.0172482    .010555    -1.63   0.110    -.0385977    .0041013
       2010  |  -.0260295   .0098404    -2.65   0.012    -.0459336   -.0061254
       2011  |   .0149757   .0087894     1.70   0.096    -.0028026    .0327539
       2012  |    -.01372   .0108963    -1.26   0.215    -.0357599    .0083199
       2013  |   .0306876   .0108189     2.84   0.007     .0088044    .0525708
       2014  |   .0643663   .0130379     4.94   0.000     .0379947     .090738
       2015  |    .049287   .0127044     3.88   0.000       .02359     .074984
       2016  |   .0097062     .01058     0.92   0.365    -.0116939    .0311064
       2017  |  -.0042328   .0099766    -0.42   0.674    -.0244124    .0159468
       2018  |   .0389851   .0112208     3.47   0.001     .0162889    .0616812
             |
       _cons |   1.544217   .1464647    10.54   0.000     1.247965     1.84047
-------------+----------------------------------------------------------------
     sigma_u |  .01767323
     sigma_e |  .07542512
         rho |  .05204595   (fraction of variance due to u_i)
------------------------------------------------------------------------------
(est1 stored)

. 
. esttab using "STATA/results/py_temp/py_result.csv", cells("b(fmt(4)) se(fmt(4
> )) p(fmt(4)star)") replace r2 plain
(output written to STATA/results/py_temp/py_result.csv)

. 
. predict predictions, xb 
(644 missing values generated)

. //predictions 
. predict predictions_u, xbu
(644 missing values generated)

. //predictions plus the fixed effect
. predict residuals, residual
(644 missing values generated)

. //residuals from standardized errors?
. predict stnderror, stdp
(644 missing values generated)

. //standardized error
. predict u, u
(644 missing values generated)

. predict e, e
(644 missing values generated)

. export delimited locale date month year dateid x y `y' weight count price adj
> _price adj_revenue lat lon predictions predictions_u residuals stnderror u e 
> using "STATA/outputs/py_temp/pyout.csv", replace
file STATA/outputs/py_temp/pyout.csv saved

. 
. clear

. 
end of do-file
