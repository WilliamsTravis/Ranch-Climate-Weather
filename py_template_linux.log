
  ___  ____  ____  ____  ____ (R)
 /__    /   ____/   /   ____/
___/   /   /___/   /   /___/   15.1   Copyright 1985-2017 StataCorp LLC
  Statistics/Data Analysis            StataCorp
                                      4905 Lakeway Drive
                                      College Station, Texas 77845 USA
                                      800-STATA-PC        http://www.stata.com
                                      979-696-4600        stata@stata.com
                                      979-696-4601 (fax)

Single-user Stata license expires 19 Mar 2019:
       Serial number:  301509290780
         Licensed to:  Travis Williams
                       Earth Lab

Notes:
      1.  Stata is running in batch mode.
      2.  Unicode is supported; see help unicode_advice.

. do STATA/models/py_template_linux.do data/tables/rmw/noaa_500_standardized_ce
> ntral_all.csv logweight spring1   

. //clear everything out
. clear all

. 
. //Includes function, up to comma
. local which `1'

. // Two files, one temp for aggregatation & one to stay the same
. 
. //Increase matrix size
. set matsize 600

. 
. // import data
. //import delimited `which'
. import delimited "data/tables/rmw/noaa_500_standardized_central_all.csv"
(77 vars, 19,550 obs)

. local y `2'

. display y
103340.52

. local x1 `3'

. local x2 `4'

. 
. 
. // Set date and time 
. egen id = group(polyid)

. g time = ym(year,month)

. xtset id time
       panel variable:  id (unbalanced)
        time variable:  time, 504 to 702, but with gaps
                delta:  1 unit

. 
. /////////////////////////////////////////////////////////////////////////////
> ///
> //////////////////////////////// Model #1 ///////////////////////////////////
> ///        
> /////////////////////////////////////////////////////////////////////////////
> ///
> eststo: xtreg `y' `x1' `x2', fe vce(robust) 

Fixed-effects (within) regression               Number of obs     =     19,550
Group variable: id                              Number of groups  =        140

R-sq:                                           Obs per group:
     within  = 0.0005                                         min =          1
     between = 0.0115                                         avg =      139.6
     overall = 0.0000                                         max =        199

                                                F(1,139)          =       8.36
corr(u_i, Xb)  = -0.0126                        Prob > F          =     0.0045

                                   (Std. Err. adjusted for 140 clusters in id)
------------------------------------------------------------------------------
             |               Robust
   logweight |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
     spring1 |   .0171786   .0059416     2.89   0.004     .0054311    .0289262
       _cons |   6.387492   .0025392  2515.58   0.000     6.382472    6.392513
-------------+----------------------------------------------------------------
     sigma_u |  .13853915
     sigma_e |  .08371502
         rho |  .73252454   (fraction of variance due to u_i)
------------------------------------------------------------------------------
(est1 stored)

. 
. esttab using "STATA\results\py_temp\py_result.csv", cells("b(fmt(4)) se(fmt(4
> )) p(fmt(4)star)") replace r2 plain
(output written to STATA\results\py_temp\py_result.csv)

. 
. predict predictions, xb 

. //predictions 
. predict predictions_u, xbu

. //predictions plus the fixed effect
. predict residuals, residual

. //residuals from standardized errors?
. predict stnderror, stdp

. //standardized error
. predict u, u

. predict e, e

. export delimited locale date month year dateid x y `y' weight count price adj
> _price adj_revenue lat lon predictions predictions_u residuals stnderror u e 
> using "STATA\outputs\py_temp\pyout.csv", replace
file STATA\outputs\py_temp\pyout.csv saved

. 
. clear

. 
end of do-file
