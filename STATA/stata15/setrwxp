
# DO NOT REMOVE BLANK LINE ABOVE ...
# it is what ensures that this script is executed by sh(1)
#
# Stata 15 for Unix component setrwxp
# Stata 15 for Unix installation script utility
# version 15.0.0
# 03feb2017

case $# in 
1)	;;
*)	cat << \!

setrwxp:  usage:  ./setrwxp now

	-setrwxp- is an utility for the installation of Stata 15.  It is 
	run automatically by the Stata 15 -install- utility, so you should
	never have to use it directly.

        -setrwxp- sets the read-write-execute permissions correctly for the
        files in the Stata directory.  You must be in the Stata directory when
        you execute this command and, of course, you must be the owner of the
        files or root.  Satisfy those two requirements and this utility is
	perfectly safe to run and re-run.  

	(no action taken)
!
	exit 1
	;;
esac

case $1 in 
now)	;;
*)	echo "(no action taken)"
	exit 1
	;;
esac

	

curdir=`pwd`

chmod 755 .
chmod 644 isstata.* 
# chmod 644 stata.msg
chmod 644 auto.dta
chmod 644 stata15.png
chmod 751 stinit 
if [ -f st15 ] 
then
	chmod 755 st15
fi
if [ -f stata-sm ] 
then
	chmod 755 stata-sm
fi
if [ -f xstata-sm ]
then
	chmod 755 xstata-sm
fi
if [ -f stata ] 
then
	chmod 755 stata
fi
if [ -f xstata ]
then
	chmod 755 xstata
fi
if [ -f stata-se ]
then
	chmod 755 stata-se
fi
if [ -f xstata-se ]
then
	chmod 755 xstata-se
fi
if [ -f stata-mp ]
then
	chmod 755 stata-mp
fi
if [ -f xstata-mp ]
then
	chmod 755 xstata-mp
fi


chmod 755 stata_br
chmod 755 stata_pdf

if [ -d statalib ]
then
	chmod 755 statalib st15
	find $curdir/statalib -type d -exec chmod 755 \{} \;
	find $curdir/statalib -type f -exec chmod 644 \{} \;
	find $curdir/statalib -type f -name "*.a" -exec chmod 755 \{} \;
	find $curdir/statalib -type f -name "*.la" -exec chmod 755 \{} \;
fi

chmod 755 docs
chmod 644 docs/*.pdf
chmod 644 docs/update

if [ -d utilities ]
then
	chmod 755 utilities
	find $curdir/utilities -type d -exec chmod 755 \{} \;
	find $curdir/utilities -type f -exec chmod a+r \{} \;
	find $curdir/utilities -type f -perm -100 -exec chmod 755 \{} \;
fi

find $curdir/ado -type d -exec chmod 755 \{} \;
find $curdir/ado -type f -exec chmod 644 \{} \;

